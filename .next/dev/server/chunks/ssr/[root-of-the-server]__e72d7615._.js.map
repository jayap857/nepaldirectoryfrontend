{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/acer/OneDrive/Desktop/nepaldirectoryfrontend/services/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// Create Axios instance\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:8000/api\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// Add a request interceptor to attach JWT token if available\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    if (typeof window !== \"undefined\") {\r\n      const token = localStorage.getItem(\r\n        process.env.NEXT_PUBLIC_JWT_STORAGE_KEY || \"access_token\"\r\n      );\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add a response interceptor to handle errors\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    if (error.response) {\r\n      // The request was made and the server responded with a status code\r\n      // that falls out of the range of 2xx\r\n      console.error(\"API Error:\", error.response.status, error.response.data);\r\n    } else if (error.request) {\r\n      // The request was made but no response was received\r\n      console.error(\"Network Error:\", error.request);\r\n    } else {\r\n      // Something happened in setting up the request that triggered an Error\r\n      console.error(\"Error:\", error.message);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;"],"names":[],"mappings":";;;;AAAA;;AAEA,wBAAwB;AACxB,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS,iEAAwC;IACjD,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,6DAA6D;AAC7D,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC;;IAQA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,8CAA8C;AAC9C,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC;IACC,OAAO;AACT,GACA,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE;QAClB,mEAAmE;QACnE,qCAAqC;QACrC,QAAQ,KAAK,CAAC,cAAc,MAAM,QAAQ,CAAC,MAAM,EAAE,MAAM,QAAQ,CAAC,IAAI;IACxE,OAAO,IAAI,MAAM,OAAO,EAAE;QACxB,oDAAoD;QACpD,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;IAC/C,OAAO;QACL,uEAAuE;QACvE,QAAQ,KAAK,CAAC,UAAU,MAAM,OAAO;IACvC;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/acer/OneDrive/Desktop/nepaldirectoryfrontend/services/authService.js"],"sourcesContent":["import api from \"./api\";\r\n\r\n// Login function - Uses Django JWT /api/token/\r\nconst login = async (email, password) => {\r\n  try {\r\n    // Django JWT expects 'username' field\r\n    // If your users log in with email, you might need to pass email as username\r\n    const response = await api.post(\"/token/\", { \r\n      username: email,  // or just 'email: email' if your backend accepts email\r\n      password \r\n    });\r\n    \r\n    // Django JWT returns { access, refresh }\r\n    return {\r\n      token: response.data.access,\r\n      refresh: response.data.refresh\r\n    };\r\n  } catch (error) {\r\n    throw error.response?.data || { message: \"Login failed\" };\r\n  }\r\n};\r\n\r\n// Signup function - FIXED to match Django UserSerializer\r\nconst signup = async (signupData) => {\r\n  try {\r\n    // Django expects: username, email, password, password_confirm, phone_number (optional)\r\n    const payload = {\r\n      username: signupData.username,\r\n      email: signupData.email,\r\n      password: signupData.password,\r\n      password_confirm: signupData.password_confirm,\r\n    };\r\n\r\n    // Only add phone_number if it exists\r\n    if (signupData.phone_number) {\r\n      payload.phone_number = signupData.phone_number;\r\n    }\r\n\r\n    console.log(\"Signup payload:\", payload); // Debug log\r\n\r\n    const response = await api.post(\"/register/\", payload);\r\n    console.log(\"Signup response:\", response.data); // Debug log\r\n    \r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Signup error:\", error.response?.data); // Debug log\r\n    throw error.response?.data || { message: \"Signup failed\" };\r\n  }\r\n};\r\n\r\n// Get user profile (JWT automatically attached via interceptor)\r\nconst getProfile = async () => {\r\n  try {\r\n    const response = await api.get(\"/profile/\");\r\n    // Backend returns UserProfileSerializer\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || { message: \"Failed to fetch profile\" };\r\n  }\r\n};\r\n\r\n// Get user dashboard data\r\nconst getDashboard = async () => {\r\n  try {\r\n    const response = await api.get(\"/dashboard/\");\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || { message: \"Failed to fetch dashboard\" };\r\n  }\r\n};\r\n\r\n// Refresh token\r\nconst refreshToken = async () => {\r\n  try {\r\n    const refresh = localStorage.getItem(\r\n      process.env.NEXT_PUBLIC_JWT_REFRESH_KEY || \"refresh_token\"\r\n    );\r\n    \r\n    if (!refresh) {\r\n      throw new Error(\"No refresh token available\");\r\n    }\r\n\r\n    const response = await api.post(\"/token/refresh/\", { refresh });\r\n    const newAccessToken = response.data.access;\r\n    \r\n    // Update access token in storage\r\n    localStorage.setItem(\r\n      process.env.NEXT_PUBLIC_JWT_STORAGE_KEY,\r\n      newAccessToken\r\n    );\r\n    \r\n    return newAccessToken;\r\n  } catch (error) {\r\n    // If refresh fails, clear tokens and logout\r\n    logout();\r\n    throw error.response?.data || { message: \"Session expired\" };\r\n  }\r\n};\r\n\r\n// Logout\r\nconst logout = () => {\r\n  localStorage.removeItem(process.env.NEXT_PUBLIC_JWT_STORAGE_KEY);\r\n  localStorage.removeItem(process.env.NEXT_PUBLIC_JWT_REFRESH_KEY || \"refresh_token\");\r\n};\r\n\r\nexport default {\r\n  login,\r\n  signup,\r\n  getProfile,\r\n  getDashboard,\r\n  refreshToken,\r\n  logout,\r\n};"],"names":[],"mappings":";;;;AAAA;;AAEA,+CAA+C;AAC/C,MAAM,QAAQ,OAAO,OAAO;IAC1B,IAAI;QACF,sCAAsC;QACtC,4EAA4E;QAC5E,MAAM,WAAW,MAAM,0HAAG,CAAC,IAAI,CAAC,WAAW;YACzC,UAAU;YACV;QACF;QAEA,yCAAyC;QACzC,OAAO;YACL,OAAO,SAAS,IAAI,CAAC,MAAM;YAC3B,SAAS,SAAS,IAAI,CAAC,OAAO;QAChC;IACF,EAAE,OAAO,OAAO;QACd,MAAM,MAAM,QAAQ,EAAE,QAAQ;YAAE,SAAS;QAAe;IAC1D;AACF;AAEA,yDAAyD;AACzD,MAAM,SAAS,OAAO;IACpB,IAAI;QACF,uFAAuF;QACvF,MAAM,UAAU;YACd,UAAU,WAAW,QAAQ;YAC7B,OAAO,WAAW,KAAK;YACvB,UAAU,WAAW,QAAQ;YAC7B,kBAAkB,WAAW,gBAAgB;QAC/C;QAEA,qCAAqC;QACrC,IAAI,WAAW,YAAY,EAAE;YAC3B,QAAQ,YAAY,GAAG,WAAW,YAAY;QAChD;QAEA,QAAQ,GAAG,CAAC,mBAAmB,UAAU,YAAY;QAErD,MAAM,WAAW,MAAM,0HAAG,CAAC,IAAI,CAAC,cAAc;QAC9C,QAAQ,GAAG,CAAC,oBAAoB,SAAS,IAAI,GAAG,YAAY;QAE5D,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB,MAAM,QAAQ,EAAE,OAAO,YAAY;QAClE,MAAM,MAAM,QAAQ,EAAE,QAAQ;YAAE,SAAS;QAAgB;IAC3D;AACF;AAEA,gEAAgE;AAChE,MAAM,aAAa;IACjB,IAAI;QACF,MAAM,WAAW,MAAM,0HAAG,CAAC,GAAG,CAAC;QAC/B,wCAAwC;QACxC,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,MAAM,MAAM,QAAQ,EAAE,QAAQ;YAAE,SAAS;QAA0B;IACrE;AACF;AAEA,0BAA0B;AAC1B,MAAM,eAAe;IACnB,IAAI;QACF,MAAM,WAAW,MAAM,0HAAG,CAAC,GAAG,CAAC;QAC/B,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,MAAM,MAAM,QAAQ,EAAE,QAAQ;YAAE,SAAS;QAA4B;IACvE;AACF;AAEA,gBAAgB;AAChB,MAAM,eAAe;IACnB,IAAI;QACF,MAAM,UAAU,aAAa,OAAO,CAClC,qDAA2C;QAG7C,IAAI,CAAC,SAAS;YACZ,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,WAAW,MAAM,0HAAG,CAAC,IAAI,CAAC,mBAAmB;YAAE;QAAQ;QAC7D,MAAM,iBAAiB,SAAS,IAAI,CAAC,MAAM;QAE3C,iCAAiC;QACjC,aAAa,OAAO,mDAElB;QAGF,OAAO;IACT,EAAE,OAAO,OAAO;QACd,4CAA4C;QAC5C;QACA,MAAM,MAAM,QAAQ,EAAE,QAAQ;YAAE,SAAS;QAAkB;IAC7D;AACF;AAEA,SAAS;AACT,MAAM,SAAS;IACb,aAAa,UAAU;IACvB,aAAa,UAAU,CAAC,qDAA2C;AACrE;uCAEe;IACb;IACA;IACA;IACA;IACA;IACA;AACF","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/acer/OneDrive/Desktop/nepaldirectoryfrontend/contexts/AuthContext.tsx"],"sourcesContent":["import { createContext, useState, useEffect, ReactNode } from 'react';\r\nimport authService from \"../services/authService\";\r\n\r\n// Define the AuthContextType type\r\nexport type AuthContextType = {\r\n  user: any | null;\r\n  isAuthenticated: boolean;\r\n  isAdmin: boolean;\r\n  login: (email: string, password: string) => Promise<{ success: boolean; message?: string }>;\r\n  logout: () => void;\r\n  signup: (userData: any) => Promise<{ success: boolean; message?: string }>;\r\n  loading: boolean;\r\n};\r\n\r\n// Define user type\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  is_staff?: boolean;\r\n  is_superuser?: boolean;\r\n}\r\n\r\n// Define error types\r\ninterface AuthError {\r\n  username?: string | string[];\r\n  email?: string | string[];\r\n  password?: string | string[];\r\n  password_confirm?: string | string[];\r\n  detail?: string;\r\n  message?: string;\r\n}\r\n\r\n// Create context with default values\r\nexport const AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  isAuthenticated: false,\r\n  isAdmin: false,\r\n  login: async () => ({ success: false }),\r\n  logout: () => {},\r\n  signup: async () => ({ success: false }),\r\n  loading: true\r\n});\r\n\r\n// Context provider\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface UserData {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  password_confirm?: string;\r\n}\r\n\r\nexport const AuthProvider = ({ children }: AuthProviderProps) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Load user on app start\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const checkAuth = async () => {\r\n    const token = localStorage.getItem(\r\n      process.env.NEXT_PUBLIC_JWT_STORAGE_KEY || \"access_token\"\r\n    );\r\n    \r\n    if (token) {\r\n      try {\r\n        // Try to fetch user profile with existing token\r\n        const userInfo = await authService.getProfile();\r\n        setUser(userInfo);\r\n        setIsAuthenticated(true);\r\n        setIsAdmin(userInfo.is_staff || userInfo.is_superuser || false);\r\n        console.log(\"User authenticated:\", userInfo);\r\n      } catch (error) {\r\n        console.log(\"Token invalid, trying refresh...\");\r\n        // Try to refresh token\r\n        try {\r\n          await authService.refreshToken();\r\n          // Retry getting profile after refresh\r\n          const userInfo = await authService.getProfile();\r\n          setUser(userInfo);\r\n          setIsAuthenticated(true);\r\n          setIsAdmin(userInfo.is_staff || userInfo.is_superuser || false);\r\n          console.log(\"User authenticated after refresh:\", userInfo);\r\n        } catch (refreshError) {\r\n          console.log(\"Refresh failed, logging out\");\r\n          // If refresh also fails, clear everything\r\n          localStorage.removeItem(process.env.NEXT_PUBLIC_JWT_STORAGE_KEY || \"access_token\");\r\n          localStorage.removeItem(process.env.NEXT_PUBLIC_JWT_REFRESH_KEY || \"refresh_token\");\r\n          setUser(null);\r\n          setIsAuthenticated(false);\r\n          setIsAdmin(false);\r\n        }\r\n      }\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  // Login\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      console.log(\"Login attempt:\", email);\r\n      const res = await authService.login(email, password);\r\n      const { token, refresh } = res;\r\n      \r\n      console.log(\"Login response:\", { token: token ? \"exists\" : \"missing\", refresh: refresh ? \"exists\" : \"missing\" });\r\n      \r\n      // Store both tokens\r\n      localStorage.setItem(\r\n        process.env.NEXT_PUBLIC_JWT_STORAGE_KEY || \"access_token\",\r\n        token\r\n      );\r\n      localStorage.setItem(\r\n        process.env.NEXT_PUBLIC_JWT_REFRESH_KEY || \"refresh_token\",\r\n        refresh\r\n      );\r\n\r\n      // Fetch user info\r\n      const userInfo = await authService.getProfile();\r\n      console.log(\"User info fetched:\", userInfo);\r\n      \r\n      setUser(userInfo);\r\n      setIsAuthenticated(true);\r\n      setIsAdmin(userInfo.is_staff || userInfo.is_superuser || false);\r\n\r\n      return { success: true };\r\n    } catch (err: unknown) {\r\n      console.error(\"Login error:\", err);\r\n      const error = err as AuthError;\r\n      return { \r\n        success: false, \r\n        message: error.detail || error.message || \"Login failed\" \r\n      };\r\n    }\r\n  };\r\n\r\n  // Signup\r\n  const signup = async (userData: UserData) => {\r\n    try {\r\n      console.log(\"Signup attempt:\", userData.username, userData.email);\r\n      const result = await authService.signup(userData);\r\n      console.log(\"Signup successful:\", result);\r\n      return { success: true };\r\n    } catch (err: unknown) {\r\n      console.error(\"Signup error:\", err);\r\n      \r\n      // Django returns validation errors as objects\r\n      let errorMessage = \"Signup failed\";\r\n      \r\n      if (typeof err === 'object' && err !== null) {\r\n        const error = err as AuthError;\r\n        // Extract first error message\r\n        if (error.username) {\r\n          errorMessage = Array.isArray(error.username) ? error.username[0] : error.username;\r\n        } else if (error.email) {\r\n          errorMessage = Array.isArray(error.email) ? error.email[0] : error.email;\r\n        } else if (error.password) {\r\n          errorMessage = Array.isArray(error.password) ? error.password[0] : error.password;\r\n        } else if (error.password_confirm) {\r\n          errorMessage = Array.isArray(error.password_confirm) ? error.password_confirm[0] : error.password_confirm;\r\n        } else if (error.detail) {\r\n          errorMessage = error.detail;\r\n        } else {\r\n          // Get first error from any field\r\n          const firstError = Object.values(err)[0];\r\n          if (Array.isArray(firstError)) {\r\n            errorMessage = firstError[0];\r\n          } else if (typeof firstError === 'string') {\r\n            errorMessage = firstError;\r\n          }\r\n        }\r\n      } else if (err instanceof Error) {\r\n        errorMessage = err.message;\r\n      }\r\n      \r\n      return { success: false, message: errorMessage };\r\n    }\r\n  };\r\n\r\n  // Logout\r\n  const logout = () => {\r\n    authService.logout();\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n    setIsAdmin(false);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        isAuthenticated,\r\n        isAdmin,\r\n        login,\r\n        logout,\r\n        signup,\r\n        loading,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAiCO,MAAM,4BAAc,IAAA,sNAAa,EAAkB;IACxD,MAAM;IACN,iBAAiB;IACjB,SAAS;IACT,OAAO,UAAY,CAAC;YAAE,SAAS;QAAM,CAAC;IACtC,QAAQ,KAAO;IACf,QAAQ,UAAY,CAAC;YAAE,SAAS;QAAM,CAAC;IACvC,SAAS;AACX;AAcO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAqB;IAC1D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,yBAAyB;IACzB,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,YAAY;QAChB,MAAM,QAAQ,aAAa,OAAO,CAChC,oDAA2C;QAG7C,IAAI,OAAO;YACT,IAAI;gBACF,gDAAgD;gBAChD,MAAM,WAAW,MAAM,kIAAW,CAAC,UAAU;gBAC7C,QAAQ;gBACR,mBAAmB;gBACnB,WAAW,SAAS,QAAQ,IAAI,SAAS,YAAY,IAAI;gBACzD,QAAQ,GAAG,CAAC,uBAAuB;YACrC,EAAE,OAAO,OAAO;gBACd,QAAQ,GAAG,CAAC;gBACZ,uBAAuB;gBACvB,IAAI;oBACF,MAAM,kIAAW,CAAC,YAAY;oBAC9B,sCAAsC;oBACtC,MAAM,WAAW,MAAM,kIAAW,CAAC,UAAU;oBAC7C,QAAQ;oBACR,mBAAmB;oBACnB,WAAW,SAAS,QAAQ,IAAI,SAAS,YAAY,IAAI;oBACzD,QAAQ,GAAG,CAAC,qCAAqC;gBACnD,EAAE,OAAO,cAAc;oBACrB,QAAQ,GAAG,CAAC;oBACZ,0CAA0C;oBAC1C,aAAa,UAAU,CAAC,oDAA2C;oBACnE,aAAa,UAAU,CAAC,qDAA2C;oBACnE,QAAQ;oBACR,mBAAmB;oBACnB,WAAW;gBACb;YACF;QACF;QAEA,WAAW;IACb;IAEA,QAAQ;IACR,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,QAAQ,GAAG,CAAC,kBAAkB;YAC9B,MAAM,MAAM,MAAM,kIAAW,CAAC,KAAK,CAAC,OAAO;YAC3C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;YAE3B,QAAQ,GAAG,CAAC,mBAAmB;gBAAE,OAAO,QAAQ,WAAW;gBAAW,SAAS,UAAU,WAAW;YAAU;YAE9G,oBAAoB;YACpB,aAAa,OAAO,CAClB,oDAA2C,gBAC3C;YAEF,aAAa,OAAO,CAClB,qDAA2C,iBAC3C;YAGF,kBAAkB;YAClB,MAAM,WAAW,MAAM,kIAAW,CAAC,UAAU;YAC7C,QAAQ,GAAG,CAAC,sBAAsB;YAElC,QAAQ;YACR,mBAAmB;YACnB,WAAW,SAAS,QAAQ,IAAI,SAAS,YAAY,IAAI;YAEzD,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,KAAc;YACrB,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM,QAAQ;YACd,OAAO;gBACL,SAAS;gBACT,SAAS,MAAM,MAAM,IAAI,MAAM,OAAO,IAAI;YAC5C;QACF;IACF;IAEA,SAAS;IACT,MAAM,SAAS,OAAO;QACpB,IAAI;YACF,QAAQ,GAAG,CAAC,mBAAmB,SAAS,QAAQ,EAAE,SAAS,KAAK;YAChE,MAAM,SAAS,MAAM,kIAAW,CAAC,MAAM,CAAC;YACxC,QAAQ,GAAG,CAAC,sBAAsB;YAClC,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,KAAc;YACrB,QAAQ,KAAK,CAAC,iBAAiB;YAE/B,8CAA8C;YAC9C,IAAI,eAAe;YAEnB,IAAI,OAAO,QAAQ,YAAY,QAAQ,MAAM;gBAC3C,MAAM,QAAQ;gBACd,8BAA8B;gBAC9B,IAAI,MAAM,QAAQ,EAAE;oBAClB,eAAe,MAAM,OAAO,CAAC,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,EAAE,GAAG,MAAM,QAAQ;gBACnF,OAAO,IAAI,MAAM,KAAK,EAAE;oBACtB,eAAe,MAAM,OAAO,CAAC,MAAM,KAAK,IAAI,MAAM,KAAK,CAAC,EAAE,GAAG,MAAM,KAAK;gBAC1E,OAAO,IAAI,MAAM,QAAQ,EAAE;oBACzB,eAAe,MAAM,OAAO,CAAC,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,EAAE,GAAG,MAAM,QAAQ;gBACnF,OAAO,IAAI,MAAM,gBAAgB,EAAE;oBACjC,eAAe,MAAM,OAAO,CAAC,MAAM,gBAAgB,IAAI,MAAM,gBAAgB,CAAC,EAAE,GAAG,MAAM,gBAAgB;gBAC3G,OAAO,IAAI,MAAM,MAAM,EAAE;oBACvB,eAAe,MAAM,MAAM;gBAC7B,OAAO;oBACL,iCAAiC;oBACjC,MAAM,aAAa,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE;oBACxC,IAAI,MAAM,OAAO,CAAC,aAAa;wBAC7B,eAAe,UAAU,CAAC,EAAE;oBAC9B,OAAO,IAAI,OAAO,eAAe,UAAU;wBACzC,eAAe;oBACjB;gBACF;YACF,OAAO,IAAI,eAAe,OAAO;gBAC/B,eAAe,IAAI,OAAO;YAC5B;YAEA,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAAa;QACjD;IACF;IAEA,SAAS;IACT,MAAM,SAAS;QACb,kIAAW,CAAC,MAAM;QAClB,QAAQ;QACR,mBAAmB;QACnB,WAAW;IACb;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/acer/OneDrive/Desktop/nepaldirectoryfrontend/services/businessService.js"],"sourcesContent":["import api from './api';\r\n\r\n// Centralized error handler ‚Äî returns string\r\nconst handleApiError = (error, defaultMessage) => {\r\n  const data = error.response?.data;\r\n  if (data) {\r\n    if (typeof data === 'string') return data;\r\n    if (data.detail) return data.detail;\r\n    if (data.message) return data.message;\r\n    if (data.non_field_errors) return data.non_field_errors[0];\r\n    const firstError = Object.values(data)[0];\r\n    return Array.isArray(firstError) ? firstError[0] : String(firstError);\r\n  }\r\n  return defaultMessage;\r\n};\r\n\r\nconst businessService = {\r\n  // ==================== Business CRUD ====================\r\n\r\n  /**\r\n   * @param {Object} params - Query params (page, category, etc.)\r\n   * @returns {Promise<Array>} List of businesses\r\n   */\r\n  getBusinesses: async (params = {}) => {\r\n    try {\r\n      const response = await api.get('/businesses/', { params });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch businesses'));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @param {number} id - Business ID\r\n   * @returns {Promise<Object>} Business details\r\n   */\r\n  getBusinessById: async (id) => {\r\n    try {\r\n      const response = await api.get(`/businesses/${id}/`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch business details'));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @param {FormData} businessData - FormData with business fields + images\r\n   * @returns {Promise<Object>} Created business\r\n   */\r\n  createBusiness: async (businessData) => {\r\n    try {\r\n      const response = await api.post('/businesses/', businessData);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to create business'));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @param {number} id - Business ID\r\n   * @param {FormData} businessData - Full update\r\n   * @returns {Promise<Object>}\r\n   */\r\n  updateBusiness: async (id, businessData) => {\r\n    try {\r\n      const response = await api.put(`/businesses/${id}/`, businessData);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to update business'));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @param {number} id - Business ID\r\n   * @param {FormData|Object} businessData - Partial update\r\n   * @returns {Promise<Object>}\r\n   */\r\n  patchBusiness: async (id, businessData) => {\r\n    try {\r\n      const config = {};\r\n      if (businessData instanceof FormData) {\r\n        // Let Axios set Content-Type\r\n      } else {\r\n        config.headers = { 'Content-Type': 'application/json' };\r\n      }\r\n      const response = await api.patch(`/businesses/${id}/`, businessData, config);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to update business'));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @param {number} id - Business ID\r\n   * @returns {Promise<void>}\r\n   */\r\n  deleteBusiness: async (id) => {\r\n    try {\r\n      await api.delete(`/businesses/${id}/`);\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to delete business'));\r\n    }\r\n  },\r\n\r\n  // ==================== Business Images ====================\r\n\r\n  /**\r\n   * @param {number} id - Business ID\r\n   * @param {File} imageFile - Image file\r\n   * @param {string} caption - Optional caption\r\n   * @param {boolean} isPrimary - Set as primary\r\n   * @returns {Promise<Object>}\r\n   */\r\n  uploadBusinessImage: async (id, imageFile, caption = '', isPrimary = false) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('image', imageFile);\r\n      if (caption) formData.append('caption', caption);\r\n      formData.append('is_primary', String(isPrimary));\r\n\r\n      const response = await api.post(`/businesses/${id}/upload_image/`, formData);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to upload image'));\r\n    }\r\n  },\r\n\r\n  // ==================== Business Reviews ====================\r\n\r\n  /**\r\n   * @param {number} id - Business ID\r\n   * @param {Object} params - Pagination, etc.\r\n   * @returns {Promise<Array>}\r\n   */\r\n  getBusinessReviews: async (id, params = {}) => {\r\n    try {\r\n      const response = await api.get(`/businesses/${id}/reviews/`, { params });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch reviews'));\r\n    }\r\n  },\r\n\r\n  // ==================== Location-Based ====================\r\n\r\n  /**\r\n   * @param {number} latitude\r\n   * @param {number} longitude\r\n   * @param {number} radius - in km\r\n   * @returns {Promise<Array>}\r\n   */\r\n  getNearbyBusinesses: async (latitude, longitude, radius = 5) => {\r\n    try {\r\n      const response = await api.get('/businesses/nearby/', {\r\n        params: { latitude, longitude, radius },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch nearby businesses'));\r\n    }\r\n  },\r\n\r\n  // ==================== Contact ====================\r\n\r\n  /**\r\n   * @param {number} businessId\r\n   * @param {string} message\r\n   * @returns {Promise<Object>}\r\n   */\r\n  contactBusiness: async (businessId, message) => {\r\n    try {\r\n      const response = await api.post(`/businesses/${businessId}/contact/`, { message });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to send message'));\r\n    }\r\n  },\r\n\r\n  // ==================== Categories ====================\r\n\r\n  getCategories: async () => {\r\n    try {\r\n      const response = await api.get('/categories/');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch categories'));\r\n    }\r\n  },\r\n\r\n  getPublicCategories: async () => {\r\n    try {\r\n      const response = await api.get('/public-categories/');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch public categories'));\r\n    }\r\n  },\r\n\r\n  createCategory: async (categoryData) => {\r\n    try {\r\n      const response = await api.post('/categories/', categoryData);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to create category'));\r\n    }\r\n  },\r\n\r\n  updateCategory: async (id, categoryData) => {\r\n    try {\r\n      const response = await api.put(`/categories/${id}/`, categoryData);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to update category'));\r\n    }\r\n  },\r\n\r\n  deleteCategory: async (id) => {\r\n    try {\r\n      await api.delete(`/categories/${id}/`);\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to delete category'));\r\n    }\r\n  },\r\n\r\n  // ==================== Statistics ====================\r\n\r\n  getTopRatedBusinesses: async (period = 'all', limit = 10) => {\r\n    try {\r\n      const response = await api.get('/top-rated/', { params: { period, limit } });\r\n      return response.data;\r\n    } catch (error) {\r\n      handleApiError(error, 'Failed to fetch top rated');\r\n    }\r\n  },\r\n\r\n  getStatistics: async () => {\r\n    try {\r\n      const response = await api.get('/statistics/');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch statistics'));\r\n    }\r\n  },\r\n\r\n  // ==================== Search ====================\r\n\r\n  searchBusinesses: async (query, filters = {}) => {\r\n    try {\r\n      const response = await api.get('/search/', {\r\n        params: { q: query, ...filters },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to search'));\r\n    }\r\n  },\r\n\r\n  // ==================== User-Specific ====================\r\n\r\n  /**\r\n   * @returns {Promise<Array>} User's businesses\r\n   */\r\n  getMyBusinesses: async () => {\r\n    try {\r\n      const response = await api.get('/my-businesses/');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch your businesses'));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @returns {Promise<Array>} User's reviews\r\n   */\r\n  getMyReviews: async () => {\r\n    try {\r\n      const response = await api.get('/my-reviews/');\r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error(handleApiError(error, 'Failed to fetch your reviews'));\r\n    }\r\n  },\r\n};\r\n\r\nexport default businessService;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/acer/OneDrive/Desktop/nepaldirectoryfrontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"@/contexts/AuthContext\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport businessService from \"@/services/businessService\";\n\ninterface Business {\n  id: number;\n  name: string;\n  category: string;\n  city: string;\n  address: string;\n  image_url: string | null;\n  average_rating: number;\n  review_count: number;\n  is_verified: boolean;\n}\n\ninterface Category {\n  id: number;\n  name: string;\n  description: string;\n  icon: string;\n  business_count: number;\n}\n\ninterface Statistics {\n  total_businesses: number;\n  total_reviews: number;\n  average_rating: number;\n}\n\nexport default function HomePage() {\n  const { user, isAuthenticated, logout } = useContext(AuthContext);\n  const router = useRouter();\n\n  const [topBusinesses, setTopBusinesses] = useState<Business[]>([]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [statistics, setStatistics] = useState<Statistics | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  useEffect(() => {\n    fetchHomeData();\n  }, []);\n\n  const fetchHomeData = async () => {\n    try {\n      const [topRated, cats, stats] = await Promise.all([\n        businessService.getTopRatedBusinesses(\"all\", 6),\n        businessService.getPublicCategories(),\n        businessService.getStatistics(),\n      ]);\n\n      setTopBusinesses(topRated);\n      setCategories(cats);\n      setStatistics(stats);\n    } catch (error) {\n      console.error(\"Failed to fetch home data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchQuery.trim()) {\n      router.push(`/businesses?search=${encodeURIComponent(searchQuery)}`);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header/Navigation */}\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center gap-2\">\n              <h1 className=\"text-2xl font-bold text-blue-600\">\n                üá≥üáµ Nepal Directory\n              </h1>\n            </div>\n            <nav className=\"flex items-center gap-4\">\n              <Link\n                href=\"/businesses\"\n                className=\"text-gray-600 hover:text-gray-900\"\n              >\n                Browse\n              </Link>\n              {isAuthenticated ? (\n                <>\n                  <Link\n                    href=\"/dashboard\"\n                    className=\"text-gray-600 hover:text-gray-900\"\n                  >\n                    Dashboard\n                  </Link>\n                  <button\n                    onClick={logout}\n                    className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition\"\n                  >\n                    Logout\n                  </button>\n                </>\n              ) : (\n                <>\n                  <Link\n                    href=\"/login\"\n                    className=\"text-gray-600 hover:text-gray-900\"\n                  >\n                    Login\n                  </Link>\n                  <Link\n                    href=\"/signup\"\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\n                  >\n                    Sign Up\n                  </Link>\n                </>\n              )}\n            </nav>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section className=\"bg-gradient-to-r from-blue-600 to-blue-800 text-white py-20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-4xl md:text-5xl font-bold mb-6\">\n            Discover Local Businesses in Nepal\n          </h2>\n          <p className=\"text-xl mb-8 text-blue-100\">\n            Find the best restaurants, services, and shops near you\n          </p>\n\n          {/* Search Bar */}\n          <form onSubmit={handleSearch} className=\"max-w-2xl mx-auto\">\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search for businesses, services, restaurants...\"\n                className=\"flex-1 px-6 py-4 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n              />\n              <button\n                type=\"submit\"\n                className=\"px-8 py-4 bg-yellow-500 text-gray-900 font-semibold rounded-lg hover:bg-yellow-400 transition\"\n              >\n                Search\n              </button>\n            </div>\n          </form>\n        </div>\n      </section>\n\n      {/* Statistics Section */}\n      {statistics && (\n        <section className=\"py-12 bg-white\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 text-center\">\n              <div>\n                <p className=\"text-4xl font-bold text-blue-600\">\n                  {statistics.total_businesses}+\n                </p>\n                <p className=\"text-gray-600 mt-2\">Businesses Listed</p>\n              </div>\n              <div>\n                <p className=\"text-4xl font-bold text-green-600\">\n                  {statistics.total_reviews}+\n                </p>\n                <p className=\"text-gray-600 mt-2\">Customer Reviews</p>\n              </div>\n              <div>\n                <p className=\"text-4xl font-bold text-yellow-600\">\n                  {statistics.average_rating.toFixed(1)}‚≠ê\n                </p>\n                <p className=\"text-gray-600 mt-2\">Average Rating</p>\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Categories Section */}\n      <section className=\"py-16 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <h3 className=\"text-3xl font-bold text-gray-900 mb-8 text-center\">\n            Browse by Category\n          </h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n            {categories.slice(0, 8).map((category) => (\n              <Link\n                key={category.id}\n                href={`/businesses?category=${category.id}`}\n                className=\"bg-white p-6 rounded-lg shadow hover:shadow-lg transition text-center\"\n              >\n                <div className=\"text-4xl mb-3\">\n                  {category.icon || \"üìÇ\"}\n                </div>\n                <h4 className=\"font-semibold text-gray-900 mb-1\">\n                  {category.name}\n                </h4>\n                <p className=\"text-sm text-gray-500\">\n                  {category.business_count} businesses\n                </p>\n              </Link>\n            ))}\n          </div>\n          {categories.length > 8 && (\n            <div className=\"text-center mt-8\">\n              <Link\n                href=\"/businesses\"\n                className=\"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\n              >\n                View All Categories\n              </Link>\n            </div>\n          )}\n        </div>\n      </section>\n\n      {/* Top Rated Businesses */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center mb-8\">\n            <h3 className=\"text-3xl font-bold text-gray-900\">\n              Top Rated Businesses\n            </h3>\n            <Link\n              href=\"/businesses?sort=rating\"\n              className=\"text-blue-600 hover:underline\"\n            >\n              View All ‚Üí\n            </Link>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {topBusinesses.map((business) => (\n              <Link\n                key={business.id}\n                href={`/business/${business.id}`}\n                className=\"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition\"\n              >\n                <div className=\"h-48 bg-gray-200\">\n                  {business.image_url ? (\n                    <img\n                      src={business.image_url}\n                      alt={business.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                      No Image\n                    </div>\n                  )}\n                </div>\n                <div className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <h4 className=\"font-semibold text-gray-900\">\n                      {business.name}\n                    </h4>\n                    {business.is_verified && (\n                      <span className=\"text-blue-600 text-sm\">‚úì</span>\n                    )}\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-2\">\n                    {business.category} ‚Ä¢ {business.city}\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-yellow-500\">\n                      ‚≠ê {business.average_rating?.toFixed(1) || \"N/A\"}\n                    </span>\n                    <span className=\"text-gray-500 text-sm\">\n                      ({business.review_count} reviews)\n                    </span>\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-16 bg-blue-600 text-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h3 className=\"text-3xl font-bold mb-4\">\n            Own a Business in Nepal?\n          </h3>\n          <p className=\"text-xl text-blue-100 mb-8\">\n            Join thousands of businesses already listed on our platform\n          </p>\n          {isAuthenticated ? (\n            <Link\n              href=\"/business/create\"\n              className=\"inline-block px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition\"\n            >\n              Add Your Business\n            </Link>\n          ) : (\n            <Link\n              href=\"/signup\"\n              className=\"inline-block px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition\"\n            >\n              Get Started Free\n            </Link>\n          )}\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-900 text-gray-300 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <p>&copy; 2025 Nepal Directory. All rights reserved.</p>\n        </div>\n      </footer>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}